{"numFailedTestSuites":1,"numFailedTests":4,"numPassedTestSuites":14,"numPassedTests":51,"numPendingTestSuites":0,"numPendingTests":0,"numRuntimeErrorTestSuites":0,"numTodoTests":0,"numTotalTestSuites":15,"numTotalTests":55,"openHandles":[],"snapshot":{"added":0,"didUpdate":false,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0},"startTime":1760688450339,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["Stripe Webhook"],"duration":2,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'pipes')\n    at IncomingMessage.Readable.unpipe (node:internal/streams/readable:1097:13)\n    at send (/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/finalhandler/index.js:288:7)\n    at /home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/finalhandler/index.js:127:5\n    at /home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/router/index.js:688:15\n    at next (/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/router/index.js:227:14)\n    at Function.handle (/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/router/index.js:186:3)\n    at Function.handle (/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/express/lib/application.js:177:15)\n    at app (/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/express/lib/express.js:38:9)\n    at /home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/firebase-functions/lib/common/onInit.js:33:16\n    at /home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/firebase-functions/lib/v2/trace.js:16:28\n    at cloudFunction (/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/firebase-functions/lib/v1/providers/https.js:53:78)\n    at Object.<anonymous> (/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/tests/stripe_webhook.spec.ts:36:24)\n    at Promise.then.completed (/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Stripe Webhook should handle a valid event","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle a valid event"},{"ancestorTitles":["Stripe Webhook"],"duration":1,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'pipes')\n    at IncomingMessage.Readable.unpipe (node:internal/streams/readable:1097:13)\n    at send (/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/finalhandler/index.js:288:7)\n    at /home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/finalhandler/index.js:127:5\n    at /home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/router/index.js:688:15\n    at next (/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/router/index.js:227:14)\n    at Function.handle (/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/router/index.js:186:3)\n    at Function.handle (/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/express/lib/application.js:177:15)\n    at app (/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/express/lib/express.js:38:9)\n    at /home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/firebase-functions/lib/common/onInit.js:33:16\n    at /home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/firebase-functions/lib/v2/trace.js:16:28\n    at cloudFunction (/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/firebase-functions/lib/v1/providers/https.js:53:78)\n    at Object.<anonymous> (/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/tests/stripe_webhook.spec.ts:47:24)\n    at Promise.then.completed (/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Stripe Webhook should handle an invalid signature","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle an invalid signature"},{"ancestorTitles":["Stripe Webhook"],"duration":1,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'pipes')\n    at IncomingMessage.Readable.unpipe (node:internal/streams/readable:1097:13)\n    at send (/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/finalhandler/index.js:288:7)\n    at /home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/finalhandler/index.js:127:5\n    at /home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/router/index.js:688:15\n    at next (/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/router/index.js:227:14)\n    at Function.handle (/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/router/index.js:186:3)\n    at Function.handle (/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/express/lib/application.js:177:15)\n    at app (/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/express/lib/express.js:38:9)\n    at /home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/firebase-functions/lib/common/onInit.js:33:16\n    at /home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/firebase-functions/lib/v2/trace.js:16:28\n    at cloudFunction (/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/firebase-functions/lib/v1/providers/https.js:53:78)\n    at Object.<anonymous> (/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/tests/stripe_webhook.spec.ts:77:24)"],"fullName":"Stripe Webhook ✅ payment_failed → el viaje cambia a PAYMENT_FAILED","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"✅ payment_failed → el viaje cambia a PAYMENT_FAILED"},{"ancestorTitles":["Stripe Webhook"],"duration":1,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'pipes')\n    at IncomingMessage.Readable.unpipe (node:internal/streams/readable:1097:13)\n    at send (/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/finalhandler/index.js:288:7)\n    at /home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/finalhandler/index.js:127:5\n    at /home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/router/index.js:688:15\n    at next (/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/router/index.js:227:14)\n    at Function.handle (/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/router/index.js:186:3)\n    at Function.handle (/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/express/lib/application.js:177:15)\n    at app (/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/express/lib/express.js:38:9)\n    at /home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/firebase-functions/lib/common/onInit.js:33:16\n    at /home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/firebase-functions/lib/v2/trace.js:16:28\n    at cloudFunction (/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/node_modules/firebase-functions/lib/v1/providers/https.js:53:78)\n    at Object.<anonymous> (/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/tests/stripe_webhook.spec.ts:105:24)"],"fullName":"Stripe Webhook ✅ charge.refunded → el viaje cambia a REFUNDED","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"✅ charge.refunded → el viaje cambia a REFUNDED"}],"endTime":1760688453573,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mStripe Webhook › should handle a valid event\u001b[39m\u001b[22m\n\n    TypeError: Cannot read properties of undefined (reading 'pipes')\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 34 |\u001b[39m     \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m { setHeader\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m,\u001b[39m getHeader\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m,\u001b[39m json\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m,\u001b[39m status\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockReturnThis()\u001b[33m,\u001b[39m send\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn() } \u001b[36mas\u001b[39m unknown \u001b[36mas\u001b[39m functions\u001b[33m.\u001b[39m\u001b[33mResponse\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 35 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 36 |\u001b[39m     \u001b[36mawait\u001b[39m stripeWebhook(req\u001b[33m,\u001b[39m res)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                        \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 37 |\u001b[39m     expect(res\u001b[33m.\u001b[39mjson)\u001b[33m.\u001b[39mtoHaveBeenCalledWith({ received\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 38 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 39 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat send (\u001b[22m\u001b[2mnode_modules/finalhandler/index.js\u001b[2m:288:7)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/finalhandler/index.js\u001b[2m:127:5\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/router/index.js\u001b[2m:688:15\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat next (\u001b[22m\u001b[2mnode_modules/router/index.js\u001b[2m:227:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Function.handle (\u001b[22m\u001b[2mnode_modules/router/index.js\u001b[2m:186:3)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Function.handle (\u001b[22m\u001b[2mnode_modules/express/lib/application.js\u001b[2m:177:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat app (\u001b[22m\u001b[2mnode_modules/express/lib/express.js\u001b[2m:38:9)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/firebase-functions/lib/common/onInit.js\u001b[2m:33:16\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/firebase-functions/lib/v2/trace.js\u001b[2m:16:28\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat cloudFunction (\u001b[22m\u001b[2mnode_modules/firebase-functions/lib/v1/providers/https.js\u001b[2m:53:78)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/stripe_webhook.spec.ts\u001b[39m\u001b[0m\u001b[2m:36:24)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mStripe Webhook › should handle an invalid signature\u001b[39m\u001b[22m\n\n    TypeError: Cannot read properties of undefined (reading 'pipes')\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 45 |\u001b[39m     \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m { setHeader\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m,\u001b[39m getHeader\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m,\u001b[39m status\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockReturnThis()\u001b[33m,\u001b[39m send\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn() } \u001b[36mas\u001b[39m unknown \u001b[36mas\u001b[39m functions\u001b[33m.\u001b[39m\u001b[33mResponse\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 46 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 47 |\u001b[39m     \u001b[36mawait\u001b[39m stripeWebhook(req\u001b[33m,\u001b[39m res)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                        \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 48 |\u001b[39m     expect(res\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[35m400\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 49 |\u001b[39m     expect(res\u001b[33m.\u001b[39msend)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'Webhook Error: Invalid signature'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 50 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat send (\u001b[22m\u001b[2mnode_modules/finalhandler/index.js\u001b[2m:288:7)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/finalhandler/index.js\u001b[2m:127:5\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/router/index.js\u001b[2m:688:15\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat next (\u001b[22m\u001b[2mnode_modules/router/index.js\u001b[2m:227:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Function.handle (\u001b[22m\u001b[2mnode_modules/router/index.js\u001b[2m:186:3)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Function.handle (\u001b[22m\u001b[2mnode_modules/express/lib/application.js\u001b[2m:177:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat app (\u001b[22m\u001b[2mnode_modules/express/lib/express.js\u001b[2m:38:9)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/firebase-functions/lib/common/onInit.js\u001b[2m:33:16\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/firebase-functions/lib/v2/trace.js\u001b[2m:16:28\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat cloudFunction (\u001b[22m\u001b[2mnode_modules/firebase-functions/lib/v1/providers/https.js\u001b[2m:53:78)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/stripe_webhook.spec.ts\u001b[39m\u001b[0m\u001b[2m:47:24)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mStripe Webhook › ✅ payment_failed → el viaje cambia a PAYMENT_FAILED\u001b[39m\u001b[22m\n\n    TypeError: Cannot read properties of undefined (reading 'pipes')\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 75 |\u001b[39m     \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m { setHeader\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m,\u001b[39m getHeader\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m,\u001b[39m json\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m,\u001b[39m status\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockReturnThis()\u001b[33m,\u001b[39m send\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn() } \u001b[36mas\u001b[39m unknown \u001b[36mas\u001b[39m functions\u001b[33m.\u001b[39m\u001b[33mResponse\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 76 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 77 |\u001b[39m     \u001b[36mawait\u001b[39m stripeWebhook(req\u001b[33m,\u001b[39m res)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                        \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 78 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 79 |\u001b[39m     expect(res\u001b[33m.\u001b[39mjson)\u001b[33m.\u001b[39mtoHaveBeenCalledWith({ received\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 80 |\u001b[39m     \u001b[36mconst\u001b[39m updatedDoc \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m tripRef\u001b[33m.\u001b[39m\u001b[36mget\u001b[39m()\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat send (\u001b[22m\u001b[2mnode_modules/finalhandler/index.js\u001b[2m:288:7)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/finalhandler/index.js\u001b[2m:127:5\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/router/index.js\u001b[2m:688:15\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat next (\u001b[22m\u001b[2mnode_modules/router/index.js\u001b[2m:227:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Function.handle (\u001b[22m\u001b[2mnode_modules/router/index.js\u001b[2m:186:3)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Function.handle (\u001b[22m\u001b[2mnode_modules/express/lib/application.js\u001b[2m:177:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat app (\u001b[22m\u001b[2mnode_modules/express/lib/express.js\u001b[2m:38:9)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/firebase-functions/lib/common/onInit.js\u001b[2m:33:16\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/firebase-functions/lib/v2/trace.js\u001b[2m:16:28\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat cloudFunction (\u001b[22m\u001b[2mnode_modules/firebase-functions/lib/v1/providers/https.js\u001b[2m:53:78)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/stripe_webhook.spec.ts\u001b[39m\u001b[0m\u001b[2m:77:24)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mStripe Webhook › ✅ charge.refunded → el viaje cambia a REFUNDED\u001b[39m\u001b[22m\n\n    TypeError: Cannot read properties of undefined (reading 'pipes')\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 103 |\u001b[39m     \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m { setHeader\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m,\u001b[39m getHeader\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m,\u001b[39m json\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m,\u001b[39m status\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockReturnThis()\u001b[33m,\u001b[39m send\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn() } \u001b[36mas\u001b[39m unknown \u001b[36mas\u001b[39m functions\u001b[33m.\u001b[39m\u001b[33mResponse\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 104 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 105 |\u001b[39m     \u001b[36mawait\u001b[39m stripeWebhook(req\u001b[33m,\u001b[39m res)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                        \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 106 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 107 |\u001b[39m     expect(res\u001b[33m.\u001b[39mjson)\u001b[33m.\u001b[39mtoHaveBeenCalledWith({ received\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 108 |\u001b[39m     \u001b[36mconst\u001b[39m updatedDoc \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m tripRef\u001b[33m.\u001b[39m\u001b[36mget\u001b[39m()\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat send (\u001b[22m\u001b[2mnode_modules/finalhandler/index.js\u001b[2m:288:7)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/finalhandler/index.js\u001b[2m:127:5\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/router/index.js\u001b[2m:688:15\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat next (\u001b[22m\u001b[2mnode_modules/router/index.js\u001b[2m:227:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Function.handle (\u001b[22m\u001b[2mnode_modules/router/index.js\u001b[2m:186:3)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Function.handle (\u001b[22m\u001b[2mnode_modules/express/lib/application.js\u001b[2m:177:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat app (\u001b[22m\u001b[2mnode_modules/express/lib/express.js\u001b[2m:38:9)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/firebase-functions/lib/common/onInit.js\u001b[2m:33:16\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/firebase-functions/lib/v2/trace.js\u001b[2m:16:28\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat cloudFunction (\u001b[22m\u001b[2mnode_modules/firebase-functions/lib/v1/providers/https.js\u001b[2m:53:78)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/stripe_webhook.spec.ts\u001b[39m\u001b[0m\u001b[2m:105:24)\u001b[22m\u001b[2m\u001b[22m\n","name":"/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/tests/stripe_webhook.spec.ts","startTime":1760688450531,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["handleStripeWebhook"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"handleStripeWebhook activates subscription on checkout.session.completed","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"activates subscription on checkout.session.completed"},{"ancestorTitles":["handleStripeWebhook"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"handleStripeWebhook does NOT activate subscription if billingConsent is false","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"does NOT activate subscription if billingConsent is false"},{"ancestorTitles":["handleStripeWebhook"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"handleStripeWebhook suspends driver on invoice.payment_failed","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"suspends driver on invoice.payment_failed"},{"ancestorTitles":["handleStripeWebhook"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"handleStripeWebhook updates KYC status on account.updated","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"updates KYC status on account.updated"},{"ancestorTitles":["handleStripeWebhook"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"handleStripeWebhook marks driver UNPAID on customer.subscription.deleted","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"marks driver UNPAID on customer.subscription.deleted"}],"endTime":1760688453674,"message":"","name":"/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/tests/stripe/webhookHandler.spec.ts","startTime":1760688453577,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Passenger Checkout webhook"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Passenger Checkout webhook marks trip as paid on checkout.session.completed with metadata.tripId","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"marks trip as paid on checkout.session.completed with metadata.tripId"}],"endTime":1760688453743,"message":"","name":"/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/tests/stripe/passengerWebhook.spec.ts","startTime":1760688453677,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Trip Disconnection Handling"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"Trip Disconnection Handling ✅ Simular un viaje activo sin updates y confirmar que se marca como disconnected","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"✅ Simular un viaje activo sin updates y confirmar que se marca como disconnected"},{"ancestorTitles":["Trip Disconnection Handling"],"duration":17,"failureDetails":[],"failureMessages":[],"fullName":"Trip Disconnection Handling ✅ Confirmar que luego pasa a pending_review","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"✅ Confirmar que luego pasa a pending_review"},{"ancestorTitles":["Trip Disconnection Handling"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Trip Disconnection Handling ❌ No debe marcar un viaje activo como disconnected si ha sido actualizado recientemente","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"❌ No debe marcar un viaje activo como disconnected si ha sido actualizado recientemente"},{"ancestorTitles":["Trip Disconnection Handling"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Trip Disconnection Handling ❌ No debe marcar un viaje disconnected como pending_review si no ha pasado el tiempo suficiente","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"❌ No debe marcar un viaje disconnected como pending_review si no ha pasado el tiempo suficiente"}],"endTime":1760688453814,"message":"","name":"/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/tests/trips_disconnection.spec.ts","startTime":1760688453745,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Trip Functions","requestTrip"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Trip Functions requestTrip should create a new trip","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should create a new trip"},{"ancestorTitles":["Trip Functions","acceptTrip"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Trip Functions acceptTrip should accept a trip successfully","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should accept a trip successfully"},{"ancestorTitles":["Trip Functions","updateTripStatus"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Trip Functions updateTripStatus should update trip status to active","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should update trip status to active"}],"endTime":1760688453875,"message":"","name":"/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/tests/trips.spec.ts","startTime":1760688453817,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["createPassengerCheckoutSessionCallable"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"createPassengerCheckoutSessionCallable creates a Checkout Session with transfer_data.destination and stores session in trip","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"status":"passed","title":"creates a Checkout Session with transfer_data.destination and stores session in trip"},{"ancestorTitles":["createPassengerCheckoutSessionCallable"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"createPassengerCheckoutSessionCallable rejects when trip is not pending","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"rejects when trip is not pending"}],"endTime":1760688453935,"message":"","name":"/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/tests/stripe/passengerCheckout.spec.ts","startTime":1760688453881,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["submitRating Callable Function"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"submitRating Callable Function ✅ Pasajero califica un viaje completado → éxito","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"✅ Pasajero califica un viaje completado → éxito"},{"ancestorTitles":["submitRating Callable Function"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"submitRating Callable Function ❌ Pasajero intenta calificar un viaje no completado → error","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"❌ Pasajero intenta calificar un viaje no completado → error"},{"ancestorTitles":["submitRating Callable Function"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"submitRating Callable Function ❌ Pasajero intenta calificar un trip que no es suyo → error","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"❌ Pasajero intenta calificar un trip que no es suyo → error"},{"ancestorTitles":["submitRating Callable Function"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"submitRating Callable Function ❌ Pasajero intenta calificar dos veces el mismo trip → error","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"❌ Pasajero intenta calificar dos veces el mismo trip → error"},{"ancestorTitles":["submitRating Callable Function"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"submitRating Callable Function ❌ Usuario no autenticado no puede crear ratings → error","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"❌ Usuario no autenticado no puede crear ratings → error"}],"endTime":1760688454002,"message":"","name":"/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/tests/ratings.spec.ts","startTime":1760688453937,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["checkDriverSubscriptionCallable"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"checkDriverSubscriptionCallable returns active true when expiration is in the future","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"returns active true when expiration is in the future"},{"ancestorTitles":["checkDriverSubscriptionCallable"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"checkDriverSubscriptionCallable returns active false when expiration is in the past","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"returns active false when expiration is in the past"},{"ancestorTitles":["checkDriverSubscriptionCallable"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"checkDriverSubscriptionCallable treats missing expiration as active (trial)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"treats missing expiration as active (trial)"}],"endTime":1760688454049,"message":"","name":"/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/tests/stripe/checkDriverSubscription.spec.ts","startTime":1760688454005,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["subscribeDriverCallable"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"subscribeDriverCallable creates a Checkout session for weekly subscription","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"creates a Checkout session for weekly subscription"},{"ancestorTitles":["subscribeDriverCallable"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"subscribeDriverCallable rejects when billingConsent is false","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"rejects when billingConsent is false"}],"endTime":1760688454099,"message":"","name":"/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/tests/stripe/subscribeDriver.spec.ts","startTime":1760688454052,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Shared Trips Functionality"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Shared Trips Functionality ✅ Confirmar que un usuario solo accede a trips activos (via reglas de Firestore)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"✅ Confirmar que un usuario solo accede a trips activos (via reglas de Firestore)"},{"ancestorTitles":["Shared Trips Functionality"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Shared Trips Functionality ✅ Confirmar que al finalizar un viaje, el shared trip cambia a active = false","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"✅ Confirmar que al finalizar un viaje, el shared trip cambia a active = false"},{"ancestorTitles":["Shared Trips Functionality"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Shared Trips Functionality ✅ Confirmar que la función programada elimina o limpia los enlaces expirados","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"✅ Confirmar que la función programada elimina o limpia los enlaces expirados"}],"endTime":1760688454154,"message":"","name":"/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/tests/shared_trips.spec.ts","startTime":1760688454106,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["createDriverAccountCallable"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"createDriverAccountCallable creates an Express account and returns onboarding link","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"creates an Express account and returns onboarding link"},{"ancestorTitles":["createDriverAccountCallable"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"createDriverAccountCallable rejects unauthenticated calls","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"rejects unauthenticated calls"}],"endTime":1760688454204,"message":"","name":"/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/tests/stripe/createDriverAccount.spec.ts","startTime":1760688454156,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["fares.ts - time windows and fare calculation"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"fares.ts - time windows and fare calculation Tarifa base diurna (app): usa baseFareDay a las 12:00Z","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"Tarifa base diurna (app): usa baseFareDay a las 12:00Z"},{"ancestorTitles":["fares.ts - time windows and fare calculation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"fares.ts - time windows and fare calculation Tarifa base nocturna (app): usa baseFareNight a las 02:00Z y 23:00Z y 05:59Z","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"Tarifa base nocturna (app): usa baseFareNight a las 02:00Z y 23:00Z y 05:59Z"},{"ancestorTitles":["fares.ts - time windows and fare calculation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"fares.ts - time windows and fare calculation Distancia diurna: total = baseFareDay + km * perKm","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"Distancia diurna: total = baseFareDay + km * perKm"},{"ancestorTitles":["fares.ts - time windows and fare calculation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"fares.ts - time windows and fare calculation Distancia nocturna: total = baseFareNight + km * perKm","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"Distancia nocturna: total = baseFareNight + km * perKm"}],"endTime":1760688454236,"message":"","name":"/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/tests/fares.spec.ts","startTime":1760688454211,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Geo Library"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Geo Library should calculate the distance between two points correctly","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should calculate the distance between two points correctly"},{"ancestorTitles":["Geo Library"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Geo Library should return true if a point is within the geofence","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return true if a point is within the geofence"},{"ancestorTitles":["Geo Library"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Geo Library should return false if a point is outside the geofence","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return false if a point is outside the geofence"}],"endTime":1760688454254,"message":"","name":"/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/tests/geo.spec.ts","startTime":1760688454238,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["State Library"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"State Library should allow PENDING -> ASSIGNED","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should allow PENDING -> ASSIGNED"},{"ancestorTitles":["State Library"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"State Library should not allow PENDING -> COMPLETED","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should not allow PENDING -> COMPLETED"},{"ancestorTitles":["State Library"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"State Library should allow ASSIGNED -> ACTIVE","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should allow ASSIGNED -> ACTIVE"},{"ancestorTitles":["State Library"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"State Library should allow ACTIVE -> COMPLETED","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should allow ACTIVE -> COMPLETED"},{"ancestorTitles":["State Library"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"State Library should not allow COMPLETED -> ACTIVE","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should not allow COMPLETED -> ACTIVE"},{"ancestorTitles":["State Library"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"State Library should return next statuses for ACTIVE","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return next statuses for ACTIVE"},{"ancestorTitles":["State Library"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"State Library should allow ASSIGNED -> ARRIVED","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should allow ASSIGNED -> ARRIVED"},{"ancestorTitles":["State Library"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"State Library should allow ARRIVED -> NO_SHOW","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should allow ARRIVED -> NO_SHOW"},{"ancestorTitles":["State Library"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"State Library should allow ACTIVE -> DISCONNECTED","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should allow ACTIVE -> DISCONNECTED"},{"ancestorTitles":["State Library"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"State Library should allow COMPLETED -> PAYMENT_FAILED","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should allow COMPLETED -> PAYMENT_FAILED"},{"ancestorTitles":["State Library"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"State Library should allow COMPLETED -> REFUNDED","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should allow COMPLETED -> REFUNDED"},{"ancestorTitles":["State Library"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"State Library should not allow PENDING -> COMPLETED (redundant check)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should not allow PENDING -> COMPLETED (redundant check)"},{"ancestorTitles":["State Library"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"State Library should not allow COMPLETED -> ACTIVE (redundant check)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should not allow COMPLETED -> ACTIVE (redundant check)"}],"endTime":1760688454278,"message":"","name":"/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/tests/state.spec.ts","startTime":1760688454260,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Offline SMS Ride Flow"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Offline SMS Ride Flow should process an offline SMS ride request and respond with driver details","invocations":1,"location":null,"numPassingAsserts":8,"retryReasons":[],"status":"passed","title":"should process an offline SMS ride request and respond with driver details"}],"endTime":1760688454302,"message":"","name":"/home/jesus-rodriguez/ecosistema-taxipro/Taxipro-backend/functions/tests/offline-sms.spec.ts","startTime":1760688454281,"status":"passed","summary":""}],"wasInterrupted":false}
